<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: sketch.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: sketch.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { globals } from "./globals.js";
import { SOUND1_SRC } from "./constants.js";
import ControlsAndInput from "./controllers/controlsAndInput.js";

/**
 * Create a new p5 instance with a sketch function
 * @function
 * @param {P5} p5 - The p5 instance
 */
export function sketch(p5) {
  // Preload function to load sound before setup
  p5.preload = () => {
    const soundLoaded = p5.loadSound(SOUND1_SRC);
    globals.sound = soundLoaded;
  };

  // Setup function to initialize the sketch
  p5.setup = () => {
    p5.createCanvas(p5.windowWidth, p5.windowHeight);
    p5.background(0);
    globals.controls = new ControlsAndInput();

    //instantiate the fft object
    // globals.fourier = new window.p5.FFT();

    //create a new visualisation container and add visualisations
    // globals.vis = new Visualisations();
    // globals.vis.add(new Spectrum());
    // globals.vis.add(new WavePattern());
    // vis.add(new Needles());
  };

  // Draw function called continuously to update the sketch
  p5.draw = () => {
    p5.background(0);
    //draw the selected visualisation
    globals.vis?.selectedVisual &amp;&amp; globals.vis.selectedVisual.draw(p5);
    //draw the controls on top.
    globals.controls.draw(p5);
  };
}

// [GLOBAL EVENTS] ---------------------------------------
/**
 * Event handler for mouse click
 * @function
 */
function mouseClicked() {
  globals.controls.mousePressed();
}

/**
 * Event handler for key press
 * @function
 */
function keyPressed() {
  globals.controls.keyPressed(keyCode);
}

/**
 * Event handler for window resize.
 * when the window has been resized. Resize canvas to fit if the visualisation needs to be resized call its onResize method
 * @function
 */
function windowResized() {
  resizeCanvas(p5.windowWidth, p5.windowHeight);
  if (globals.vis.selectedVisual.hasOwnProperty("onResize")) {
    globals.vis.selectedVisual.onResize();
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="globals.html">globals</a></li></ul><h3>Classes</h3><ul><li><a href="ControlsAndInput.html">ControlsAndInput</a></li><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#keyPressed">keyPressed</a></li><li><a href="global.html#mouseClicked">mouseClicked</a></li><li><a href="global.html#sketch">sketch</a></li><li><a href="global.html#windowResized">windowResized</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Jan 26 2024 14:27:03 GMT+0900 (GMT+09:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
